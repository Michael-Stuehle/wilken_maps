<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<title>Wilken Maps Passwort vergessen</title>
        <link rel="stylesheet" href="style.css">	
        <script src="/script.js"></script>
        <style>
           .form{
                min-width: 300px;
            }
        </style>	
    </head>
	<body>
		<div class="form">
            <h1>Wilken Maps</h1>
            <iframe id="resultFrame" name="formDestination" style="visibility: hidden; width: 0px; height: 0px;" onload="Result()"></iframe>
           
            <form id="form" action="passwordVergessen" method="POST" target="formDestination" style="visibility: hidden; height: 0px;">
                <input name="username" id="submit-username">
            </form>
            <div>
                <input type="text" id="user" name="username" placeholder="E-Mail" required autofocus>
                <input type="submit" value="Abschicken" onclick="DoSubmit()">
            </div>
			
            <a href="/login.html">Anmelden</a>
            <a class="right" href="/register.html">registrieren</a>
            <script>
                function DoSubmit(){
                    document.getElementById("submit-username").value = document.getElementById("user").value;
                    document.getElementById("form").submit();
                }

                function Result(){
                    var iframe = document.getElementById("resultFrame");
                    var resultText = iframe.contentWindow.document.body.innerHTML;
                    if (resultText === '') {
                        // do nothing
                    }else if (resultText === 'mail wurde gesendet') {
                        window.alert(resultText);
                        window.location.href = getUrl() + '/login';
                    }else{
                        window.alert(resultText);
                    }
                }

                function getUrl(){
                    var arr = window.location.href.split('/');
                    return arr[0] + '//' + arr[2];
                }
            </script>
        </div>
	</body>
</html>